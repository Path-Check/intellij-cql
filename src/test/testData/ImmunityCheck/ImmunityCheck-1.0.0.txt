Cql Language file(0,621)
  Library(Library)(0,621)
    LibraryDefinition(LibraryDefinition)(0,37)
      PsiElement('library')('library')(0,7)
      PsiWhiteSpace(' ')(7,8)
      QualifiedIdentifier(QualifiedIdentifier)(8,21)
        Identifier(Identifier)(8,21)
          PsiElement(IDENTIFIER)('ImmunityCheck')(8,21)
      PsiWhiteSpace(' ')(21,22)
      PsiElement('version')('version')(22,29)
      PsiWhiteSpace(' ')(29,30)
      VersionSpecifier(VersionSpecifier)(30,37)
        PsiElement(STRING)(''1.0.0'')(30,37)
    PsiWhiteSpace('\n\n')(37,39)
    Definition(Definition)(39,65)
      UsingDefinition(UsingDefinition)(39,65)
        PsiElement('using')('using')(39,44)
        PsiWhiteSpace(' ')(44,45)
        QualifiedIdentifier(QualifiedIdentifier)(45,49)
          Identifier(Identifier)(45,49)
            PsiElement(IDENTIFIER)('FHIR')(45,49)
        PsiWhiteSpace(' ')(49,50)
        PsiElement('version')('version')(50,57)
        PsiWhiteSpace(' ')(57,58)
        VersionSpecifier(VersionSpecifier)(58,65)
          PsiElement(STRING)(''4.0.1'')(58,65)
    PsiWhiteSpace('\n\n')(65,67)
    Definition(Definition)(67,98)
      IncludeDefinition(IncludeDefinition)(67,98)
        PsiElement('include')('include')(67,74)
        PsiWhiteSpace(' ')(74,75)
        QualifiedIdentifier(QualifiedIdentifier)(75,82)
          Identifier(Identifier)(75,82)
            PsiElement(IDENTIFIER)('Commons')(75,82)
        PsiWhiteSpace(' ')(82,83)
        PsiElement('version')('version')(83,90)
        PsiWhiteSpace(' ')(90,91)
        VersionSpecifier(VersionSpecifier)(91,98)
          PsiElement(STRING)(''1.0.0'')(91,98)
    PsiWhiteSpace('\n')(98,99)
    Definition(Definition)(99,155)
      IncludeDefinition(IncludeDefinition)(99,155)
        PsiElement('include')('include')(99,106)
        PsiWhiteSpace(' ')(106,107)
        QualifiedIdentifier(QualifiedIdentifier)(107,120)
          Identifier(Identifier)(107,120)
            PsiElement(QUOTEDIDENTIFIER)('"FHIRHelpers"')(107,120)
        PsiWhiteSpace(' ')(120,121)
        PsiElement('version')('version')(121,128)
        PsiWhiteSpace(' ')(128,129)
        VersionSpecifier(VersionSpecifier)(129,136)
          PsiElement(STRING)(''4.0.1'')(129,136)
        PsiWhiteSpace(' ')(136,137)
        PsiElement('called')('called')(137,143)
        PsiWhiteSpace(' ')(143,144)
        LocalIdentifier(LocalIdentifier)(144,155)
          Identifier(Identifier)(144,155)
            PsiElement(IDENTIFIER)('FHIRHelpers')(144,155)
    PsiWhiteSpace('\n\n')(155,157)
    Statement(Statement)(157,172)
      ContextDefinition(ContextDefinition)(157,172)
        PsiElement('context')('context')(157,164)
        PsiWhiteSpace(' ')(164,165)
        Identifier(Identifier)(165,172)
          PsiElement(IDENTIFIER)('Patient')(165,172)
    PsiWhiteSpace('\n\n')(172,174)
    Statement(Statement)(174,255)
      ExpressionDefinition(ExpressionDefinition)(174,255)
        PsiElement('define')('define')(174,180)
        PsiWhiteSpace(' ')(180,181)
        Identifier(Identifier)(181,204)
          PsiElement(QUOTEDIDENTIFIER)('"CompletedImmunization"')(181,204)
        PsiElement(':')(':')(204,205)
        PsiWhiteSpace('\n  ')(205,208)
        OrExpression(OrExpression)(208,255)
          ExistenceExpression(ExistenceExpression)(208,228)
            PsiElement('exists')('exists')(208,214)
            TermExpression(TermExpression)(214,228)
              TermExpressionTerm(TermExpressionTerm)(214,228)
                ParenthesizedTerm(ParenthesizedTerm)(214,228)
                  PsiElement('(')('(')(214,215)
                  TermExpression(TermExpression)(215,227)
                    TermExpressionTerm(TermExpressionTerm)(215,227)
                      InvocationTerm(InvocationTerm)(215,227)
                        MemberInvocation(MemberInvocation)(215,227)
                          ReferentialIdentifier(ReferentialIdentifier)(215,227)
                            Identifier(Identifier)(215,227)
                              PsiElement(IDENTIFIER)('GetFinalDose')(215,227)
                  PsiElement(')')(')')(227,228)
          PsiWhiteSpace(' ')(228,229)
          PsiElement('or')('or')(229,231)
          PsiWhiteSpace(' ')(231,232)
          ExistenceExpression(ExistenceExpression)(232,255)
            PsiElement('exists')('exists')(232,238)
            TermExpression(TermExpression)(238,255)
              TermExpressionTerm(TermExpressionTerm)(238,255)
                ParenthesizedTerm(ParenthesizedTerm)(238,255)
                  PsiElement('(')('(')(238,239)
                  TermExpression(TermExpression)(239,254)
                    TermExpressionTerm(TermExpressionTerm)(239,254)
                      InvocationTerm(InvocationTerm)(239,254)
                        MemberInvocation(MemberInvocation)(239,254)
                          ReferentialIdentifier(ReferentialIdentifier)(239,254)
                            Identifier(Identifier)(239,254)
                              PsiElement(QUOTEDIDENTIFIER)('"GetSingleDose"')(239,254)
                  PsiElement(')')(')')(254,255)
    PsiWhiteSpace('\n\n')(255,257)
    PsiComment(LINE_COMMENT)('// Test of Comment')(257,275)
    PsiWhiteSpace('\n')(275,276)
    Statement(Statement)(276,430)
      ExpressionDefinition(ExpressionDefinition)(276,430)
        PsiElement('define')('define')(276,282)
        PsiWhiteSpace(' ')(282,283)
        Identifier(Identifier)(283,295)
          PsiElement(IDENTIFIER)('GetFinalDose')(283,295)
        PsiElement(':')(':')(295,296)
        PsiWhiteSpace('\n  ')(296,299)
        QueryExpression(QueryExpression)(299,430)
          Query(Query)(299,430)
            SourceClause(SourceClause)(299,317)
              AliasedQuerySource(AliasedQuerySource)(299,317)
                QuerySource(QuerySource)(299,313)
                  Retrieve(Retrieve)(299,313)
                    PsiElement('[')('[')(299,300)
                    NamedTypeSpecifier(NamedTypeSpecifier)(300,312)
                      ReferentialOrTypeNameIdentifier(ReferentialOrTypeNameIdentifier)(300,312)
                        ReferentialIdentifier(ReferentialIdentifier)(300,312)
                          Identifier(Identifier)(300,312)
                            PsiElement(IDENTIFIER)('Immunization')(300,312)
                    PsiElement(']')(']')(312,313)
                PsiWhiteSpace(' ')(313,314)
                Alias(Alias)(314,317)
                  Identifier(Identifier)(314,317)
                    PsiElement(IDENTIFIER)('Iss')(314,317)
            PsiWhiteSpace('\n    ')(317,322)
            WhereClause(WhereClause)(322,430)
              PsiElement('where')('where')(322,327)
              PsiWhiteSpace(' ')(327,328)
              AndExpression(AndExpression)(328,430)
                ExistenceExpression(ExistenceExpression)(328,355)
                  PsiElement('exists')('exists')(328,334)
                  TermExpression(TermExpression)(334,355)
                    TermExpressionTerm(TermExpressionTerm)(334,355)
                      ParenthesizedTerm(ParenthesizedTerm)(334,355)
                        PsiElement('(')('(')(334,335)
                        TermExpression(TermExpression)(335,354)
                          InvocationExpressionTerm(InvocationExpressionTerm)(335,354)
                            TermExpressionTerm(TermExpressionTerm)(335,338)
                              InvocationTerm(InvocationTerm)(335,338)
                                MemberInvocation(MemberInvocation)(335,338)
                                  ReferentialIdentifier(ReferentialIdentifier)(335,338)
                                    Identifier(Identifier)(335,338)
                                      PsiElement(IDENTIFIER)('Iss')(335,338)
                            PsiElement('.')('.')(338,339)
                            QualifiedMemberInvocation(QualifiedMemberInvocation)(339,354)
                              ReferentialIdentifier(ReferentialIdentifier)(339,354)
                                Identifier(Identifier)(339,354)
                                  PsiElement(IDENTIFIER)('protocolApplied')(339,354)
                        PsiElement(')')(')')(354,355)
                PsiWhiteSpace('\n      ')(355,362)
                PsiElement('and')('and')(362,365)
                PsiWhiteSpace(' ')(365,366)
                EqualityExpression(EqualityExpression)(366,430)
                  TermExpression(TermExpression)(366,403)
                    InvocationExpressionTerm(InvocationExpressionTerm)(366,403)
                      InvocationExpressionTerm(InvocationExpressionTerm)(366,397)
                        InvocationExpressionTerm(InvocationExpressionTerm)(366,385)
                          TermExpressionTerm(TermExpressionTerm)(366,369)
                            InvocationTerm(InvocationTerm)(366,369)
                              MemberInvocation(MemberInvocation)(366,369)
                                ReferentialIdentifier(ReferentialIdentifier)(366,369)
                                  Identifier(Identifier)(366,369)
                                    PsiElement(IDENTIFIER)('Iss')(366,369)
                          PsiElement('.')('.')(369,370)
                          QualifiedMemberInvocation(QualifiedMemberInvocation)(370,385)
                            ReferentialIdentifier(ReferentialIdentifier)(370,385)
                              Identifier(Identifier)(370,385)
                                PsiElement(IDENTIFIER)('protocolApplied')(370,385)
                        PsiElement('.')('.')(385,386)
                        QualifiedMemberInvocation(QualifiedMemberInvocation)(386,397)
                          ReferentialIdentifier(ReferentialIdentifier)(386,397)
                            Identifier(Identifier)(386,397)
                              PsiElement(IDENTIFIER)('seriesDoses')(386,397)
                      PsiElement('.')('.')(397,398)
                      QualifiedMemberInvocation(QualifiedMemberInvocation)(398,403)
                        ReferentialIdentifier(ReferentialIdentifier)(398,403)
                          Identifier(Identifier)(398,403)
                            PsiElement(IDENTIFIER)('value')(398,403)
                  PsiWhiteSpace(' ')(403,404)
                  PsiElement('=')('=')(404,405)
                  PsiWhiteSpace(' ')(405,406)
                  TermExpression(TermExpression)(406,430)
                    InvocationExpressionTerm(InvocationExpressionTerm)(406,430)
                      TermExpressionTerm(TermExpressionTerm)(406,413)
                        InvocationTerm(InvocationTerm)(406,413)
                          MemberInvocation(MemberInvocation)(406,413)
                            ReferentialIdentifier(ReferentialIdentifier)(406,413)
                              Identifier(Identifier)(406,413)
                                PsiElement(IDENTIFIER)('Commons')(406,413)
                      PsiElement('.')('.')(413,414)
                      QualifiedFunctionInvocation(QualifiedFunctionInvocation)(414,430)
                        QualifiedFunction(QualifiedFunction)(414,430)
                          IdentifierOrFunctionIdentifier(IdentifierOrFunctionIdentifier)(414,425)
                            Identifier(Identifier)(414,425)
                              PsiElement(IDENTIFIER)('myDoseLimit')(414,425)
                          PsiElement('(')('(')(425,426)
                          ParamList(ParamList)(426,429)
                            TermExpression(TermExpression)(426,429)
                              TermExpressionTerm(TermExpressionTerm)(426,429)
                                LiteralTerm(LiteralTerm)(426,429)
                                  NumberLiteral(NumberLiteral)(426,429)
                                    PsiElement(NUMBER)('0.2')(426,429)
                          PsiElement(')')(')')(429,430)
    PsiWhiteSpace('\n\n')(430,432)
    Statement(Statement)(432,621)
      ExpressionDefinition(ExpressionDefinition)(432,621)
        PsiElement('define')('define')(432,438)
        PsiWhiteSpace(' ')(438,439)
        Identifier(Identifier)(439,454)
          PsiElement(QUOTEDIDENTIFIER)('"GetSingleDose"')(439,454)
        PsiElement(':')(':')(454,455)
        PsiWhiteSpace('\n  ')(455,458)
        QueryExpression(QueryExpression)(458,621)
          Query(Query)(458,621)
            SourceClause(SourceClause)(458,474)
              AliasedQuerySource(AliasedQuerySource)(458,474)
                QuerySource(QuerySource)(458,472)
                  Retrieve(Retrieve)(458,472)
                    PsiElement('[')('[')(458,459)
                    NamedTypeSpecifier(NamedTypeSpecifier)(459,471)
                      ReferentialOrTypeNameIdentifier(ReferentialOrTypeNameIdentifier)(459,471)
                        ReferentialIdentifier(ReferentialIdentifier)(459,471)
                          Identifier(Identifier)(459,471)
                            PsiElement(IDENTIFIER)('Immunization')(459,471)
                    PsiElement(']')(']')(471,472)
                PsiWhiteSpace(' ')(472,473)
                Alias(Alias)(473,474)
                  Identifier(Identifier)(473,474)
                    PsiElement(IDENTIFIER)('I')(473,474)
            PsiWhiteSpace('\n    ')(474,479)
            WhereClause(WhereClause)(479,621)
              PsiElement('where')('where')(479,484)
              PsiWhiteSpace(' ')(484,485)
              AndExpression(AndExpression)(485,621)
                AndExpression(AndExpression)(485,563)
                  ExistenceExpression(ExistenceExpression)(485,510)
                    PsiElement('exists')('exists')(485,491)
                    TermExpression(TermExpression)(491,510)
                      TermExpressionTerm(TermExpressionTerm)(491,510)
                        ParenthesizedTerm(ParenthesizedTerm)(491,510)
                          PsiElement('(')('(')(491,492)
                          TermExpression(TermExpression)(492,509)
                            InvocationExpressionTerm(InvocationExpressionTerm)(492,509)
                              TermExpressionTerm(TermExpressionTerm)(492,493)
                                InvocationTerm(InvocationTerm)(492,493)
                                  MemberInvocation(MemberInvocation)(492,493)
                                    ReferentialIdentifier(ReferentialIdentifier)(492,493)
                                      Identifier(Identifier)(492,493)
                                        PsiElement(IDENTIFIER)('I')(492,493)
                              PsiElement('.')('.')(493,494)
                              QualifiedMemberInvocation(QualifiedMemberInvocation)(494,509)
                                ReferentialIdentifier(ReferentialIdentifier)(494,509)
                                  Identifier(Identifier)(494,509)
                                    PsiElement(IDENTIFIER)('protocolApplied')(494,509)
                          PsiElement(')')(')')(509,510)
                  PsiWhiteSpace('\n      ')(510,517)
                  PsiElement('and')('and')(517,520)
                  PsiWhiteSpace(' ')(520,521)
                  ExistenceExpression(ExistenceExpression)(521,563)
                    PsiElement('exists')('exists')(521,527)
                    TermExpression(TermExpression)(527,563)
                      TermExpressionTerm(TermExpressionTerm)(527,563)
                        ParenthesizedTerm(ParenthesizedTerm)(527,563)
                          PsiElement('(')('(')(527,528)
                          TermExpression(TermExpression)(528,562)
                            InvocationExpressionTerm(InvocationExpressionTerm)(528,562)
                              InvocationExpressionTerm(InvocationExpressionTerm)(528,556)
                                InvocationExpressionTerm(InvocationExpressionTerm)(528,545)
                                  TermExpressionTerm(TermExpressionTerm)(528,529)
                                    InvocationTerm(InvocationTerm)(528,529)
                                      MemberInvocation(MemberInvocation)(528,529)
                                        ReferentialIdentifier(ReferentialIdentifier)(528,529)
                                          Identifier(Identifier)(528,529)
                                            PsiElement(IDENTIFIER)('I')(528,529)
                                  PsiElement('.')('.')(529,530)
                                  QualifiedMemberInvocation(QualifiedMemberInvocation)(530,545)
                                    ReferentialIdentifier(ReferentialIdentifier)(530,545)
                                      Identifier(Identifier)(530,545)
                                        PsiElement(IDENTIFIER)('protocolApplied')(530,545)
                                PsiElement('.')('.')(545,546)
                                QualifiedMemberInvocation(QualifiedMemberInvocation)(546,556)
                                  ReferentialIdentifier(ReferentialIdentifier)(546,556)
                                    Identifier(Identifier)(546,556)
                                      PsiElement(IDENTIFIER)('doseNumber')(546,556)
                              PsiElement('.')('.')(556,557)
                              QualifiedMemberInvocation(QualifiedMemberInvocation)(557,562)
                                ReferentialIdentifier(ReferentialIdentifier)(557,562)
                                  Identifier(Identifier)(557,562)
                                    PsiElement(IDENTIFIER)('value')(557,562)
                          PsiElement(')')(')')(562,563)
                PsiWhiteSpace('\n      ')(563,570)
                PsiElement('and')('and')(570,573)
                PsiWhiteSpace(' ')(573,574)
                NotExpression(NotExpression)(574,621)
                  PsiElement('not')('not')(574,577)
                  PsiWhiteSpace(' ')(577,578)
                  ExistenceExpression(ExistenceExpression)(578,621)
                    PsiElement('exists')('exists')(578,584)
                    TermExpression(TermExpression)(584,621)
                      TermExpressionTerm(TermExpressionTerm)(584,621)
                        ParenthesizedTerm(ParenthesizedTerm)(584,621)
                          PsiElement('(')('(')(584,585)
                          TermExpression(TermExpression)(585,620)
                            InvocationExpressionTerm(InvocationExpressionTerm)(585,620)
                              InvocationExpressionTerm(InvocationExpressionTerm)(585,614)
                                InvocationExpressionTerm(InvocationExpressionTerm)(585,602)
                                  TermExpressionTerm(TermExpressionTerm)(585,586)
                                    InvocationTerm(InvocationTerm)(585,586)
                                      MemberInvocation(MemberInvocation)(585,586)
                                        ReferentialIdentifier(ReferentialIdentifier)(585,586)
                                          Identifier(Identifier)(585,586)
                                            PsiElement(IDENTIFIER)('I')(585,586)
                                  PsiElement('.')('.')(586,587)
                                  QualifiedMemberInvocation(QualifiedMemberInvocation)(587,602)
                                    ReferentialIdentifier(ReferentialIdentifier)(587,602)
                                      Identifier(Identifier)(587,602)
                                        PsiElement(IDENTIFIER)('protocolApplied')(587,602)
                                PsiElement('.')('.')(602,603)
                                QualifiedMemberInvocation(QualifiedMemberInvocation)(603,614)
                                  ReferentialIdentifier(ReferentialIdentifier)(603,614)
                                    Identifier(Identifier)(603,614)
                                      PsiElement(IDENTIFIER)('seriesDoses')(603,614)
                              PsiElement('.')('.')(614,615)
                              QualifiedMemberInvocation(QualifiedMemberInvocation)(615,620)
                                ReferentialIdentifier(ReferentialIdentifier)(615,620)
                                  Identifier(Identifier)(615,620)
                                    PsiElement(IDENTIFIER)('value')(615,620)
                          PsiElement(')')(')')(620,621)